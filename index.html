<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bia e Guilherme</title>

<style>
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #000;
    }

    #container {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }

    video, canvas {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        object-fit: cover;
        width: 100vw;
        height: 100vh;
    }

    #frame {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        max-width: 100vw;
        max-height: 100vh;
        pointer-events: none;
    }

    #buttons {
        position: absolute;
        top: 3%;
        display: flex;
        gap: 10px;
        z-index: 10;
    }

    button {
        background: #ffffffcc;
        border: none;
        padding: 8px 12px;
        border-radius: 10px;
        font-size: 13px;
        cursor: pointer;
    }

    #saveBtn { display: none; } /* some antes da foto */
</style>
</head>

<body>

<div id="container">
    <video id="camera" autoplay muted playsinline></video>
    <img id="frame" src="frame.png">
    <canvas id="canvas"></canvas>

    <div id="buttons">
        <button id="shotBtn">ðŸ“¸ Tirar Foto</button>
        <button id="saveBtn">ðŸ’¾ Salvar</button>
        <button id="againBtn">ðŸ”„ Outra Foto</button>
    </div>
</div>

<script>
const video = document.getElementById("camera");
const canvas = document.getElementById("canvas");
const context = canvas.getContext("2d");
const shotBtn = document.getElementById("shotBtn");
const saveBtn = document.getElementById("saveBtn");
const againBtn = document.getElementById("againBtn");
const frame = document.getElementById("frame");

// Inicia a cÃ¢mera
navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
.then(stream => { video.srcObject = stream; });

// Tirar a foto
shotBtn.onclick = () => {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;

    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    context.drawImage(frame, 0, 0, canvas.width, canvas.height);

    video.style.display = "none";
    canvas.style.display = "block";

    shotBtn.style.display = "none";
    saveBtn.style.display = "inline-block";
};

// Salvar
saveBtn.onclick = () => {
    const link = document.createElement("a");
    link.download = "foto.png";
    link.href = canvas.toDataURL();
    link.click();
};

// Outra foto
againBtn.onclick = () => {
    canvas.style.display = "none";
    video.style.display = "block";
    shotBtn.style.display = "inline-block";
    saveBtn.style.display = "none";
};
</script>

</body>
</html>
